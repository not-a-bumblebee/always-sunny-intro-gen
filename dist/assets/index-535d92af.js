(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))u(i);new MutationObserver(i=>{for(const f of i)if(f.type==="childList")for(const m of f.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&u(m)}).observe(document,{childList:!0,subtree:!0});function s(i){const f={};return i.integrity&&(f.integrity=i.integrity),i.referrerPolicy&&(f.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?f.credentials="include":i.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function u(i){if(i.ep)return;i.ep=!0;const f=s(i);fetch(i.href,f)}})();function ce(o){if(o.__esModule)return o;var a=o.default;if(typeof a=="function"){var s=function u(){if(this instanceof u){var i=[null];i.push.apply(i,arguments);var f=Function.bind.apply(a,i);return new f}return a.apply(this,arguments)};s.prototype=a.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(o).forEach(function(u){var i=Object.getOwnPropertyDescriptor(o,u);Object.defineProperty(s,u,i.get?i:{enumerable:!0,get:function(){return o[u]}})}),s}var fe={exports:{}};(function(o){var a=function(s){var u=Object.prototype,i=u.hasOwnProperty,f=Object.defineProperty||function(t,e,r){t[e]=r.value},m,v=typeof Symbol=="function"?Symbol:{},h=v.iterator||"@@iterator",O=v.asyncIterator||"@@asyncIterator",T=v.toStringTag||"@@toStringTag";function b(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{b({},"")}catch{b=function(e,r,c){return e[r]=c}}function W(t,e,r,c){var n=e&&e.prototype instanceof G?e:G,p=Object.create(n.prototype),E=new g(c||[]);return f(p,"_invoke",{value:Q(t,r,E)}),p}s.wrap=W;function _(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(c){return{type:"throw",arg:c}}}var R="suspendedStart",q="suspendedYield",$="executing",N="completed",y={};function G(){}function U(){}function k(){}var z={};b(z,h,function(){return this});var Y=Object.getPrototypeOf,B=Y&&Y(Y(w([])));B&&B!==u&&i.call(B,h)&&(z=B);var C=k.prototype=G.prototype=Object.create(z);U.prototype=k,f(C,"constructor",{value:k,configurable:!0}),f(k,"constructor",{value:U,configurable:!0}),U.displayName=b(k,T,"GeneratorFunction");function J(t){["next","throw","return"].forEach(function(e){b(t,e,function(r){return this._invoke(e,r)})})}s.isGeneratorFunction=function(t){var e=typeof t=="function"&&t.constructor;return e?e===U||(e.displayName||e.name)==="GeneratorFunction":!1},s.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,k):(t.__proto__=k,b(t,T,"GeneratorFunction")),t.prototype=Object.create(C),t},s.awrap=function(t){return{__await:t}};function x(t,e){function r(p,E,L,S){var j=_(t[p],t,E);if(j.type==="throw")S(j.arg);else{var X=j.arg,H=X.value;return H&&typeof H=="object"&&i.call(H,"__await")?e.resolve(H.__await).then(function(A){r("next",A,L,S)},function(A){r("throw",A,L,S)}):e.resolve(H).then(function(A){X.value=A,L(X)},function(A){return r("throw",A,L,S)})}}var c;function n(p,E){function L(){return new e(function(S,j){r(p,E,S,j)})}return c=c?c.then(L,L):L()}f(this,"_invoke",{value:n})}J(x.prototype),b(x.prototype,O,function(){return this}),s.AsyncIterator=x,s.async=function(t,e,r,c,n){n===void 0&&(n=Promise);var p=new x(W(t,e,r,c),n);return s.isGeneratorFunction(e)?p:p.next().then(function(E){return E.done?E.value:p.next()})};function Q(t,e,r){var c=R;return function(p,E){if(c===$)throw new Error("Generator is already running");if(c===N){if(p==="throw")throw E;return F()}for(r.method=p,r.arg=E;;){var L=r.delegate;if(L){var S=K(L,r);if(S){if(S===y)continue;return S}}if(r.method==="next")r.sent=r._sent=r.arg;else if(r.method==="throw"){if(c===R)throw c=N,r.arg;r.dispatchException(r.arg)}else r.method==="return"&&r.abrupt("return",r.arg);c=$;var j=_(t,e,r);if(j.type==="normal"){if(c=r.done?N:q,j.arg===y)continue;return{value:j.arg,done:r.done}}else j.type==="throw"&&(c=N,r.method="throw",r.arg=j.arg)}}}function K(t,e){var r=e.method,c=t.iterator[r];if(c===m)return e.delegate=null,r==="throw"&&t.iterator.return&&(e.method="return",e.arg=m,K(t,e),e.method==="throw")||r!=="return"&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var n=_(c,t.iterator,e.arg);if(n.type==="throw")return e.method="throw",e.arg=n.arg,e.delegate=null,y;var p=n.arg;if(!p)return e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,y;if(p.done)e[t.resultName]=p.value,e.next=t.nextLoc,e.method!=="return"&&(e.method="next",e.arg=m);else return p;return e.delegate=null,y}J(C),b(C,T,"Generator"),b(C,h,function(){return this}),b(C,"toString",function(){return"[object Generator]"});function l(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function d(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function g(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(l,this),this.reset(!0)}s.keys=function(t){var e=Object(t),r=[];for(var c in e)r.push(c);return r.reverse(),function n(){for(;r.length;){var p=r.pop();if(p in e)return n.value=p,n.done=!1,n}return n.done=!0,n}};function w(t){if(t){var e=t[h];if(e)return e.call(t);if(typeof t.next=="function")return t;if(!isNaN(t.length)){var r=-1,c=function n(){for(;++r<t.length;)if(i.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=m,n.done=!0,n};return c.next=c}}return{next:F}}s.values=w;function F(){return{value:m,done:!0}}return g.prototype={constructor:g,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=m,this.done=!1,this.delegate=null,this.method="next",this.arg=m,this.tryEntries.forEach(d),!t)for(var e in this)e.charAt(0)==="t"&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=m)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if(e.type==="throw")throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(S,j){return p.type="throw",p.arg=t,e.next=S,j&&(e.method="next",e.arg=m),!!j}for(var c=this.tryEntries.length-1;c>=0;--c){var n=this.tryEntries[c],p=n.completion;if(n.tryLoc==="root")return r("end");if(n.tryLoc<=this.prev){var E=i.call(n,"catchLoc"),L=i.call(n,"finallyLoc");if(E&&L){if(this.prev<n.catchLoc)return r(n.catchLoc,!0);if(this.prev<n.finallyLoc)return r(n.finallyLoc)}else if(E){if(this.prev<n.catchLoc)return r(n.catchLoc,!0)}else if(L){if(this.prev<n.finallyLoc)return r(n.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var c=this.tryEntries[r];if(c.tryLoc<=this.prev&&i.call(c,"finallyLoc")&&this.prev<c.finallyLoc){var n=c;break}}n&&(t==="break"||t==="continue")&&n.tryLoc<=e&&e<=n.finallyLoc&&(n=null);var p=n?n.completion:{};return p.type=t,p.arg=e,n?(this.method="next",this.next=n.finallyLoc,y):this.complete(p)},complete:function(t,e){if(t.type==="throw")throw t.arg;return t.type==="break"||t.type==="continue"?this.next=t.arg:t.type==="return"?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):t.type==="normal"&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),d(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var c=r.completion;if(c.type==="throw"){var n=c.arg;d(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:w(t),resultName:e,nextLoc:r},this.method==="next"&&(this.arg=m),y}},s}(o.exports);try{regeneratorRuntime=a}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=a:Function("r","regeneratorRuntime = r")(a)}})(fe);var ue={defaultArgs:["./ffmpeg","-nostdin","-y"],baseOptions:{log:!1,logger:()=>{},progress:()=>{},corePath:""}},pe=(o,a)=>{const s=o._malloc(a.length*Uint32Array.BYTES_PER_ELEMENT);return a.forEach((u,i)=>{const f=o.lengthBytesUTF8(u)+1,m=o._malloc(f);o.stringToUTF8(u,m,f),o.setValue(s+Uint32Array.BYTES_PER_ELEMENT*i,m,"i32")}),[a.length,s]};const de="@ffmpeg/ffmpeg",me="0.11.6",ge="FFmpeg WebAssembly version",he="src/index.js",ye="src/index.d.ts",we={example:"examples"},ve={start:"node scripts/server.js","start:worker":"node scripts/worker-server.js",build:"rimraf dist && webpack --config scripts/webpack.config.prod.js","build:worker":"rimraf dist && webpack --config scripts/webpack.config.worker.prod.js",prepublishOnly:"npm run build",lint:"eslint src",wait:"rimraf dist && wait-on http://localhost:3000/dist/ffmpeg.dev.js",test:"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:ffmpeg test:node:all","test:node":"node node_modules/mocha/bin/_mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser":"mocha-headless-chrome -a allow-file-access-from-files -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:ffmpeg":"npm run test:browser -- -f ./tests/ffmpeg.test.html"},be={"./src/node/index.js":"./src/browser/index.js"},Fe={type:"git",url:"git+https://github.com/ffmpegwasm/ffmpeg.wasm.git"},Ee=["ffmpeg","WebAssembly","video"],Le="Jerome Wu <jeromewus@gmail.com>",je="MIT",Oe={url:"https://github.com/ffmpegwasm/ffmpeg.wasm/issues"},Se={node:">=12.16.1"},Pe="https://github.com/ffmpegwasm/ffmpeg.wasm#readme",_e={"is-url":"^1.2.4","node-fetch":"^2.6.1","regenerator-runtime":"^0.13.7","resolve-url":"^0.2.1"},ke={"@babel/core":"^7.12.3","@babel/preset-env":"^7.12.1","@ffmpeg/core":"^0.11.0","@types/emscripten":"^1.39.4","babel-eslint":"^10.1.0","babel-loader":"^8.1.0",chai:"^4.2.0",cors:"^2.8.5",eslint:"^7.12.1","eslint-config-airbnb-base":"^14.1.0","eslint-plugin-import":"^2.22.1",express:"^4.17.1",mocha:"^8.2.1","mocha-headless-chrome":"^2.0.3","npm-run-all":"^4.1.5","wait-on":"^5.3.0",webpack:"^5.3.2","webpack-cli":"^4.1.0","webpack-dev-middleware":"^4.0.0"},ie={name:de,version:me,description:ge,main:he,types:ye,directories:we,scripts:ve,browser:be,repository:Fe,keywords:Ee,author:Le,license:je,bugs:Oe,engines:Se,homepage:Pe,dependencies:_e,devDependencies:ke},Te=(typeof process<"u",`https://unpkg.com/@ffmpeg/core@${ie.devDependencies["@ffmpeg/core"].substring(1)}/dist/ffmpeg-core.js`),Ce={corePath:Te};let oe=!1,ae=()=>{};const Re=o=>{oe=o},$e=o=>{ae=o},Ae=(o,a)=>{ae({type:o,message:a}),oe&&console.log(`[${o}] ${a}`)};var I={logging:oe,setLogging:Re,setCustomLogger:$e,log:Ae};const Ie=o=>`
createFFmpegCore is not defined. ffmpeg.wasm is unable to find createFFmpegCore after loading ffmpeg-core.js from ${o}. Use another URL when calling createFFmpeg():

const ffmpeg = createFFmpeg({
  corePath: 'http://localhost:3000/ffmpeg-core.js',
});
`;var ne={CREATE_FFMPEG_CORE_IS_NOT_DEFINED:Ie};const D=async(o,a)=>{I.log("info",`fetch ${o}`);const s=await(await fetch(o)).arrayBuffer();I.log("info",`${o} file size = ${s.byteLength} bytes`);const u=new Blob([s],{type:a}),i=URL.createObjectURL(u);return I.log("info",`${o} blob URL = ${i}`),i},Ne=async({corePath:o,workerPath:a,wasmPath:s})=>{if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){if(typeof o!="string")throw Error("corePath should be a string!");const v=new URL(o,import.meta.url).href,h=await D(v,"application/javascript"),O=await D(s!==void 0?s:v.replace("ffmpeg-core.js","ffmpeg-core.wasm"),"application/wasm"),T=await D(a!==void 0?a:v.replace("ffmpeg-core.js","ffmpeg-core.worker.js"),"application/javascript");return typeof createFFmpegCore>"u"?new Promise(b=>{if(globalThis.importScripts(h),typeof createFFmpegCore>"u")throw Error(ne.CREATE_FFMPEG_CORE_IS_NOT_DEFINED(v));I.log("info","ffmpeg-core.js script loaded"),b({createFFmpegCore,corePath:h,wasmPath:O,workerPath:T})}):(I.log("info","ffmpeg-core.js script is loaded already"),Promise.resolve({createFFmpegCore,corePath:h,wasmPath:O,workerPath:T}))}if(typeof o!="string")throw Error("corePath should be a string!");const u=new URL(o,import.meta.url).href,i=await D(u,"application/javascript"),f=await D(s!==void 0?s:u.replace("ffmpeg-core.js","ffmpeg-core.wasm"),"application/wasm"),m=await D(a!==void 0?a:u.replace("ffmpeg-core.js","ffmpeg-core.worker.js"),"application/javascript");return typeof createFFmpegCore>"u"?new Promise(v=>{const h=document.createElement("script"),O=()=>{if(h.removeEventListener("load",O),typeof createFFmpegCore>"u")throw Error(ne.CREATE_FFMPEG_CORE_IS_NOT_DEFINED(u));I.log("info","ffmpeg-core.js script loaded"),v({createFFmpegCore,corePath:i,wasmPath:f,workerPath:m})};h.src=i,h.type="text/javascript",h.addEventListener("load",O),document.getElementsByTagName("head")[0].appendChild(h)}):(I.log("info","ffmpeg-core.js script is loaded already"),Promise.resolve({createFFmpegCore,corePath:i,wasmPath:f,workerPath:m}))},Ge=o=>new Promise((a,s)=>{const u=new FileReader;u.onload=()=>{a(u.result)},u.onerror=({target:{error:{code:i}}})=>{s(Error(`File could not be read! Code=${i}`))},u.readAsArrayBuffer(o)}),Ue=async o=>{let a=o;return typeof o>"u"?new Uint8Array:(typeof o=="string"?/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(o)?a=atob(o.split(",")[1]).split("").map(s=>s.charCodeAt(0)):a=await(await fetch(new URL(o,import.meta.url).href)).arrayBuffer():(o instanceof File||o instanceof Blob)&&(a=await Ge(o)),new Uint8Array(a))},Be=Object.freeze(Object.defineProperty({__proto__:null,defaultOptions:Ce,fetchFile:Ue,getCreateFFmpegCore:Ne},Symbol.toStringTag,{value:"Module"})),se=ce(Be),{defaultArgs:xe,baseOptions:De}=ue,Me=pe,{defaultOptions:We,getCreateFFmpegCore:qe}=se,{version:ze}=ie,ee=Error("ffmpeg.wasm is not ready, make sure you have completed load().");var Ye=(o={})=>{const{log:a,logger:s,progress:u,...i}={...De,...We,...o};let f=null,m=null,v=null,h=null,O=!1,T=()=>{},b=a,W=u,_=0,R=0,q=!1,$=0;const N=l=>{l==="FFMPEG_END"&&v!==null&&(v(),v=null,h=null,O=!1)},y=(l,d)=>{T({type:l,message:d}),b&&console.log(`[${l}] ${d}`)},G=l=>{const[d,g,w]=l.split(":");return parseFloat(d)*60*60+parseFloat(g)*60+parseFloat(w)},U=(l,d)=>{if(typeof l=="string")if(l.startsWith("  Duration")){const g=l.split(", ")[0].split(": ")[1],w=G(g);d({duration:w,ratio:$}),(_===0||_>w)&&(_=w,q=!0)}else if(q&&l.startsWith("    Stream")){const g=l.match(/([\d.]+) fps/);if(g){const w=parseFloat(g[1]);R=_*w}else R=0;q=!1}else if(l.startsWith("frame")||l.startsWith("size")){const g=l.split("time=")[1].split(" ")[0],w=G(g),F=l.match(/frame=\s*(\d+)/);if(R&&F){const t=parseFloat(F[1]);$=Math.min(t/R,1)}else $=w/_;d({ratio:$,time:w})}else l.startsWith("video:")&&(d({ratio:1}),_=0)},k=({type:l,message:d})=>{y(l,d),U(d,W),N(d)},z=async()=>{if(y("info","load ffmpeg-core"),f===null){y("info","loading ffmpeg-core");const{createFFmpegCore:l,corePath:d,workerPath:g,wasmPath:w}=await qe(i);f=await l({mainScriptUrlOrBlob:d,printErr:F=>k({type:"fferr",message:F}),print:F=>k({type:"ffout",message:F}),locateFile:(F,t)=>{if(typeof window<"u"||typeof WorkerGlobalScope<"u"){if(typeof w<"u"&&F.endsWith("ffmpeg-core.wasm"))return w;if(typeof g<"u"&&F.endsWith("ffmpeg-core.worker.js"))return g}return t+F}}),m=f.cwrap(i.mainName||"proxy_main","number",["number","number"]),y("info","ffmpeg-core loaded")}else throw Error("ffmpeg.wasm was loaded, you should not load it again, use ffmpeg.isLoaded() to check next time.")},Y=()=>f!==null,B=(...l)=>{if(y("info",`run ffmpeg command: ${l.join(" ")}`),f===null)throw ee;if(O)throw Error("ffmpeg.wasm can only run one command at a time");return O=!0,new Promise((d,g)=>{const w=[...xe,...l].filter(F=>F.length!==0);v=d,h=g,m(...Me(f,w))})},C=(l,...d)=>{if(y("info",`run FS.${l} ${d.map(g=>typeof g=="string"?g:`<${g.length} bytes binary file>`).join(" ")}`),f===null)throw ee;{let g=null;try{g=f.FS[l](...d)}catch{throw Error(l==="readdir"?`ffmpeg.FS('readdir', '${d[0]}') error. Check if the path exists, ex: ffmpeg.FS('readdir', '/')`:l==="readFile"?`ffmpeg.FS('readFile', '${d[0]}') error. Check if the path exists`:"Oops, something went wrong in FS operation.")}return g}},J=()=>{if(f===null)throw ee;h&&h("ffmpeg has exited"),O=!1;try{f.exit(1)}catch(l){y(l.message),h&&h(l)}finally{f=null,m=null,v=null,h=null}},x=l=>{W=l},Q=l=>{T=l},K=l=>{b=l};return y("info",`use ffmpeg.wasm v${ze}`),{setProgress:x,setLogger:Q,setLogging:K,load:z,isLoaded:Y,run:B,exit:J,FS:C}};const He=Ye,{fetchFile:Je}=se;var te={createFFmpeg:He,fetchFile:Je};const M=te.createFFmpeg({log:!0});let Ke=new FontFace("textile_regular",'url("textile_regular.ttf") '),re,P,le,V=document.getElementById("area");V.oninput=Ve;crossOriginIsolated?console.log("We are cors isolated"):console.log("we NOT cors isolated",crossOriginIsolated);function Ve(){console.log("input:",V.value),console.log("array test::",V.value.split(`
`));let o=V.value.split(`
`);o[0]='"'+o[0],o[o.length-1]=o[o.length-1]+'"',P.fillStyle="black",P.fillRect(0,0,1280,713);for(let a=0;a<o.length;a++)P.fillStyle="white",P.fillText(o[a].split("").join(String.fromCharCode(8202)),649,345+72*a)}let Z=document.getElementById("generate");Z.addEventListener("click",o=>{o.preventDefault(),le=re.toDataURL("image/png"),Ze()});async function Ze(){Z.disabled="true",console.log("Generating Intro");let o=await fetch("./always sunny.mp4");console.log("vidya",o),M.isLoaded()||await M.load();let a=document.getElementById("output");a.style.display="none";let s=document.getElementById("loading");s.innerText="Loading";let u=setInterval(()=>{s.innerText.length<10?s.innerText+=".":s.innerText="Loading"},1e3);M.FS("writeFile","always sunny.mp4",await te.fetchFile(o.url)),M.FS("writeFile","intro_title",await te.fetchFile(le)),await M.run("-i","always sunny.mp4","-i","intro_title","-filter_complex","[1][0]scale2ref[i][v];[v][i]overlay=enable='between(t,0,2.9)'","-c:a","copy","intro.mp4");const i=M.FS("readFile","intro.mp4"),f=URL.createObjectURL(new Blob([i.buffer],{type:"video/mp4"}));clearInterval(u),s.innerText="",Z.disabled=!Z.disabled,a.src=f,a.style.display="block"}Ke.load().then(o=>{document.fonts.add(o),console.log("font loaded",o),re=document.getElementById("canvas"),P=re.getContext("2d"),P.fillStyle="black",P.fillRect(0,0,1280,713),P.fillStyle="white",P.font="62px textile_regular",P.filter="blur(0.7px)",P.textAlign="center"});
